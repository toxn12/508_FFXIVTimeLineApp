# 課題管理表

## 課題の追加方法

### 書式

```markdown
### [優先度] 課題タイトル
- **ステータス**: [未着手/対応中/完了/保留]
- **担当者**: （任意）
- **登録日**: YYYY-MM-DD
- **完了日**: YYYY-MM-DD（完了時に記入）
- **説明**: 課題の詳細説明
- **関連ファイル**: （あれば記載）
```

### 優先度の定義

- **高**: システムの基本機能に影響する重大な不具合、または必須機能の欠如
- **中**: 使い勝手に影響するが回避策がある課題、または追加機能
- **低**: 軽微な改善提案、将来的な機能追加

---

## 完了済み課題

### [高] 右クリックで編集メニュー（ギミックやスキルの追加、削除）を操作できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - ギミック、バーストタイミング、フェーズ、スキルの右クリックから削除が可能に
  - フェーズの右クリックから「フェーズの区切りを追加」が可能に
  - 画面外に出ないよう位置を自動調整
- **関連ファイル**:
  - `src/components/ui/ContextMenu.vue` (新規作成)
  - `src/components/timeline/GimmickRow.vue`
  - `src/components/timeline/BurstHighlight.vue`
  - `src/components/timeline/PhaseRow.vue`
  - `src/components/timeline-items/SkillBar.vue`

### [高] ギミックがドラッグで移動できない
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - handleMouseDownにe.stopPropagation()を追加
  - ドラッグ処理の修正
- **関連ファイル**: `src/components/timeline/GimmickRow.vue:91-115`

### [高] バーストタイミングも移動や削除ができない
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - ドラッグ処理にe.stopPropagation()を追加
  - 右クリックメニューから削除可能に
- **関連ファイル**: `src/components/timeline/BurstHighlight.vue:61-85`

### [高] フェーズ名が編集できない
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - ダブルクリックによるインライン編集を実装
  - Enterキーまたはフォーカスアウトで確定
- **関連ファイル**: `src/components/timeline/PhaseRow.vue:49-64`

### [高] フェーズが削除できない
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - 右クリックメニューから削除可能（最低1つは必要なので条件付き無効化）
- **関連ファイル**: `src/components/timeline/PhaseRow.vue:82-112`

### [中] スキルやギミックなどドラッグ移動可能なオブジェクトは、その先頭が何分何秒に位置しているのかをドラッグ時に表示する
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - DragTimeIndicatorコンポーネントを新規作成
  - uiStoreにdraggingTime状態とsetDraggingTime()を追加
  - 「分:秒」形式でマウスカーソルの右上に追従表示
- **関連ファイル**:
  - `src/components/ui/DragTimeIndicator.vue` (新規作成)
  - `src/stores/uiStore.ts:28-29,127-135`
  - 各ドラッグ可能コンポーネント（GimmickRow, BurstHighlight, PhaseRow, SkillBar）

### [中] フェーズの区切りには垂直線を入れる
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - PhaseDividersコンポーネントを新規作成
  - フェーズの開始位置に灰色の垂直線を表示
- **関連ファイル**:
  - `src/components/timeline/PhaseDividers.vue` (新規作成)
  - `src/components/Timeline.vue`

### [中] フェーズの区切り追加は、フェーズのオブジェクトを右クリックした際に「フェーズの区切りを追加」から操作できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - 右クリックメニューに「フェーズの区切りを追加」を実装
  - クリック位置を基準に分割処理を実行
- **関連ファイル**: `src/components/timeline/PhaseRow.vue:82-112`

### [中] ヘッダーの編集アイコンのうち、削除（ゴミ箱）は不要。右クリックから各オブジェクトが削除できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - EditToolbarから削除ツールボタンを削除
  - 各オブジェクトの右クリックメニューから削除操作に統一
- **関連ファイル**: `src/components/header/EditToolbar.vue:7-10`

### [中] 各ジョブのタイムラインをマウスオーバーすると、バーストタイミングのハイライトが消えてしまう。常にハイライトは表示されるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - hover効果を`hover:bg-gray-800`から`hover:bg-gray-800/50`に変更
  - マウスオーバー時も背景が半透明になり、バーストハイライトが透けて見えるように
- **関連ファイル**: `src/components/timeline/MemberRow.vue:57`

### [低] 「保存」ボタンを「ダウンロード」ボタンにリネーム
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - 通常モード・編集モード両方の「保存」ボタンを「ダウンロード」に変更
- **関連ファイル**: `src/components/AppHeader.vue:43,71`

### [中] ギミックやスキルにメモを追加できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - Gimmick, SkillPlacementの型にmemo?フィールドを追加
  - 右クリックメニューに「メモを編集」オプションを追加
  - メモ付きのオブジェクトには📝アイコンとリング表示
  - マウスオーバーでメモ内容をツールチップ表示
- **関連ファイル**:
  - `src/types/content.ts:30`
  - `src/types/party.ts:30`
  - `src/components/timeline/GimmickRow.vue`
  - `src/components/timeline-items/SkillBar.vue`

### [中] タイムライン上にメモを追加できるようにする（◆表示）
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - TimelineMemo型を新規定義
  - MemoMarkerRowコンポーネントを新規作成
  - ◆マーカーでメモ位置を表示、マウスオーバーで内容表示
  - 右クリックまたはメモ追加ツールでメモ追加可能
  - 編集モードでドラッグ移動可能
- **関連ファイル**:
  - `src/types/content.ts:40-44`
  - `src/stores/contentStore.ts:320-373`
  - `src/components/timeline/MemoMarkerRow.vue` (新規作成)
  - `src/components/timeline/TimelineHeader.vue`
  - `src/components/header/EditToolbar.vue`
  - `src/types/ui.ts:6`

### [高] フェーズは区切り位置（前フェーズの終端）だけを移動できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - PhaseDividersコンポーネントを拡張してドラッグ可能に
  - 編集モード時にカーソルがew-resize（左右矢印）に変更
  - movePhaseDividerメソッドを追加（区切り位置のみ変更）
- **関連ファイル**:
  - `src/components/timeline/PhaseDividers.vue`
  - `src/stores/contentStore.ts:188-201`

### [高] ギミックの終端をドラッグして秒数調整できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - GimmickRowにリサイズハンドルを追加
  - 終端ドラッグでcastDurationを調整
  - ドラッグ中は調整中の秒数を表示
- **関連ファイル**: `src/components/timeline/GimmickRow.vue:74-110,242-255`

### [高] パーティ選択時のチェック表示とコンテンツ連動
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - パーティ一覧でクリック選択、チェックマーク表示
  - 選択中のパーティはハイライト表示
  - モーダルを閉じたら選択パーティがコンテンツの対象パーティに
- **関連ファイル**: `src/components/modals/PartyManageModal.vue`

### [高] パーティ人数を2～8人で調整できるようにする
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - partyStoreにaddMember, removeMember, setMemberCountメソッドを追加
  - パーティ管理モーダルに人数調整UI（±ボタン、セレクト）を追加
  - デフォルト8人、最小2人、最大8人
- **関連ファイル**:
  - `src/stores/partyStore.ts:265-346`
  - `src/components/modals/PartyManageModal.vue:80-96,180-209`

### [高] スキルのドラッグ時に垂直線を追加
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - スキルドラッグ時に開始位置（黄色）と終了位置（青色）の垂直線を表示
  - uiStoreにdraggingSkillPositions状態とsetDraggingSkillPositionsメソッドを追加
  - SkillDragLinesコンポーネントを新規作成
- **関連ファイル**:
  - `src/stores/uiStore.ts:31-32,143-150,163,186`
  - `src/components/ui/SkillDragLines.vue` (新規作成)
  - `src/components/Timeline.vue:9,173`
  - `src/components/timeline-items/SkillBar.vue:126,132,135,142`

### [高] パーティスキルの効果表示
- **ステータス**: 完了
- **登録日**: 2026-01-21
- **完了日**: 2026-01-21
- **説明**:
  - Skill型にphysicalMitigation、magicalMitigation、buffPowerを追加
  - スキルマスタJSONに各スキルの効果情報を設定
  - SkillBarでツールチップに効果情報を表示
- **関連ファイル**:
  - `src/types/skill.ts:17-19`
  - `public/data/skills/jobs.json` (全スキルに効果情報を追加)
  - `src/components/timeline-items/SkillBar.vue:48-62,171`

---

## 未着手・対応中の課題

### [中] スキルのキャストタイム、リキャストタイムの追加
- **ステータス**: 未着手
- **登録日**: 2026-01-21
- **説明**: スキルに対して、発動前のキャストタイム、スキル使用後に再度利用できるようになるまでのリキャストタイムを追加する。キャストタイムは縁を黄色、内部はピンク系、リキャストタイムは無効であることがわかるような配色にして。タイムラインをスクロールしてもどのスキルなのかわかるようスキル名表示はスクロールについてくるように。

### [中] パーティメンバー間でのスキル干渉のアラート追加
- **ステータス**: 未着手
- **登録日**: 2026-01-21
- **説明**: ロールスキルは複数人が同時に使うことができる。発動時間帯がタイムライン上で被っている場合は、そのスキルに警告マークをつける。

### [高] パーティスキルの効果集計
- **ステータス**: 未着手
- **登録日**: 2026-01-21
- **説明**: タイムライン上で、パーティがキャストした軽減スキルの効果の合算を行う。パーティ情報の先頭に集計効果の行を追加する。（物理、魔法系の2種類）％単位なので、線グラフか棒グラフとして描画。

---

## 課題追加時の注意事項

1. **重複確認**: 同じ課題が既に登録されていないか確認してください
2. **優先度**: システムへの影響度を考慮して適切な優先度を設定してください
3. **具体性**: 「〜を改善する」ではなく「〜を〜のように変更する」など具体的に記述してください
4. **再現手順**: 不具合の場合は再現手順を明記してください
5. **期待される動作**: 修正後にどうなるべきかを明確に記述してください

## セキュリティ関連の課題について

セキュリティに関わる課題は優先度を高に設定し、以下を明記してください：
- OWASP該当項目（該当する場合）
- 影響範囲
- 暫定的な回避策（あれば）
